# -- Container image configuration
image:
  # -- Container registry and repository
  repository: busybox
  # -- Image pull policy (Always, IfNotPresent, Never)
  pullPolicy: IfNotPresent
  # -- Image tag override (defaults to Chart.appVersion)
  # IMPORTANT: Do not use "latest" in production
  tag: ""

# -- Cron schedule in standard cron format
# Format: "minute hour day month weekday"
# Examples:
#   "*/5 * * * *"     - Every 5 minutes
#   "0 */2 * * *"     - Every 2 hours
#   "0 0 * * *"       - Daily at midnight
#   "0 0 * * 0"       - Weekly on Sunday
# Tip: Use https://crontab.guru for help
schedule: "0 */2 * * *"

# -- Command to run in the container (overrides ENTRYPOINT)
command:
  - /bin/sh
  - -c
  - date; echo Hello!

# -- Arguments to pass to command (or to container ENTRYPOINT if command not set)
args: []

# -- CronJob-specific configuration
cronjob:
  # -- Concurrency policy: Allow, Forbid, or Replace
  # - Allow: allows concurrent jobs (default)
  # - Forbid: skips new job if previous is still running
  # - Replace: replaces currently running job with new job
  concurrencyPolicy: Forbid

  # -- Number of successful job history to retain
  successfulJobsHistoryLimit: 3

  # -- Number of failed job history to retain
  failedJobsHistoryLimit: 5

  # -- Deadline in seconds for starting the job if it misses scheduled time
  # If not set, jobs have no deadline
  startingDeadlineSeconds: 300

  # -- Suspend cron job execution (useful for maintenance)
  suspend: false

# -- Job-level configuration (applied to each job created)
job:
  # -- Number of retries before marking job as failed
  backoffLimit: 3

  # -- Maximum duration in seconds for job to complete
  # Job will be terminated if it exceeds this time
  activeDeadlineSeconds: 600  # 10 minutes

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

# -- Pod-level security context
# See https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534
  runAsGroup: 65534
  fsGroup: 65534
  seccompProfile:
    type: RuntimeDefault

# -- Container-level security context
# See https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
containerSecurityContext:
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  runAsUser: 65534
  runAsGroup: 65534
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# -- Resource requests and limits
# See https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi
  # VPA-friendly alternative: omit limits to allow VPA recommendations
  # limits:
  #   cpu: 500m
  #   memory: 512Mi

nodeSelector: {}

tolerations: []

affinity: {}

ttlSecondsAfterFinished: # default 3600

# -- Metrics configuration
metrics:
  # -- Enable metrics endpoint (if job supports it)
  enabled: false
  # -- Metrics endpoint path
  path: /metrics
  # -- Metrics endpoint port
  port: 8080
  # -- ServiceMonitor configuration for Prometheus Operator
  serviceMonitor:
    # -- Enable ServiceMonitor creation
    enabled: false
    # -- ServiceMonitor namespace (defaults to release namespace)
    namespace: ""
    # -- Additional labels for ServiceMonitor
    labels: {}
    #   release: prometheus
    # -- Scrape interval
    interval: 30s
    # -- Scrape timeout
    scrapeTimeout: 10s

# -- Network policy configuration
networkPolicy:
  # -- Enable NetworkPolicy creation
  enabled: false
  # -- Egress rules configuration
  egress:
    # -- Enable egress rules (restricts outbound traffic)
    enabled: false
    # -- DNS egress configuration
    dns:
      # -- Allow DNS resolution
      enabled: true
    # -- Custom egress rules
    customRules: []
      # Example: Allow HTTPS to external APIs
      # - to:
      #     - namespaceSelector: {}
      #   ports:
      #     - protocol: TCP
      #       port: 443

containerEnvironmentVariables: []
#  - name: ASPNETCORE_URLS
#    value: "http://*:8080"
#  - name: COMPlus_EnableDiagnostics
#    value: "0"
containerEnvFrom: []
  # - configMapRef:
  #     name: my-config
  # - secretRef:
  #     name: my-secret

# -- Init containers to run before the main job container
# See https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
initContainers: []
  # - name: wait-for-service
  #   image: busybox:1.36.1
  #   command: ['sh', '-c', 'until nslookup myservice; do sleep 2; done']
  # - name: download-data
  #   image: curlimages/curl:latest
  #   command: ['sh', '-c', 'curl -o /data/file.txt https://example.com/file.txt']
  #   volumeMounts:
  #     - name: data
  #       mountPath: /data

# -- Additional containers to run alongside the main job container
# See https://kubernetes.io/docs/concepts/workloads/pods/
additionalContainers: []
  # - name: log-shipper
  #   image: fluent/fluent-bit:latest
  #   volumeMounts:
  #     - name: logs
  #       mountPath: /logs

# -- Volumes to mount in the job pod
# See https://kubernetes.io/docs/concepts/storage/volumes/
volumes: []
  # - name: config-vol
  #   configMap:
  #     name: my-config
  # - name: secret-vol
  #   secret:
  #     secretName: my-secret
  # - name: data-vol
  #   persistentVolumeClaim:
  #     claimName: my-pvc

# -- Volume mounts for the main container
# See https://kubernetes.io/docs/concepts/storage/volumes/
volumeMounts: []
  # - name: config-vol
  #   mountPath: /config
  #   readOnly: true
  # - name: secret-vol
  #   mountPath: /secrets
  #   readOnly: true
  # - name: data-vol
  #   mountPath: /data